# Bank Account Management System

## Overview

A comprehensive Bank Account Management System built with **Laravel 12** and **Livewire**. This application is designed to efficiently manage sensitive customer data, multiple bank accounts, and ATM cards under an agent-referral system. It features a robust ticketing system for handling customer complaints and tracking resolutions.

## Key Features

-   **Customer Management**: Comprehensive CRUD operations for customer personal data, including regional information (Province, Regency, District, Village) and KTP document upload.
-   **Account Management**: Manage bank accounts linked specifically to customers and referring agents.
-   **Card Management**: Secure management of ATM cards associated with accounts. Sensitive information (such as PIN/CVV details) is handled securely via protected notes rather than direct storage.
-   **Shipment Management**: Track and manage account delivery shipments with expedition integration (KlikResi), including delivery dates, tracking numbers, and status updates.
-   **Help Desk**: Integrated ticketing system for tracking, processing, and resolving customer complaints.
-   **Agent Portal**: Dedicated access for agents to manage their referrals, shipments, and track ticket statuses.
-   **User, Role & Permission Management**: Admin management of users, roles, and permissions via Spatie Laravel Permission.
-   **Reporting & Exports**: Built-in functionality to export data tables to **PDF** and **Excel** formats, including print views.
-   **API Integration**: RESTful API endpoints secured with **Laravel Sanctum**, with documentation generated by **Dedoc Scramble**.

## Technology Stack

-   **Framework**: Laravel 12
-   **Frontend**: Livewire 4 + Flux UI
-   **Styling**: Tailwind CSS v4
-   **Database**: MySQL
-   **Authentication**: Laravel Fortify & Sanctum
-   **Authorization**: Spatie Laravel Permission (roles & permissions)
-   **Testing**: Pest PHP 4
-   **PDF Generation**: Barryvdh DOMPDF
-   **Excel Export**: Maatwebsite Laravel Excel
-   **Shipment Tracking**: KlikResi integration for tracking delivery shipments
-   **API Docs**: Dedoc Scramble
-   **App Server** (optional): Laravel Octane

## Requirements

-   PHP >= 8.2
-   Composer
-   Node.js & NPM

## Installation

1.  **Clone the repository**

    ```bash
    git clone <repository-url>
    cd rekening
    ```

2.  **Install PHP Dependencies**

    ```bash
    composer install
    ```

3.  **Install Node Dependencies**

    ```bash
    npm install
    ```

4.  **Environment Setup**
    Copy the example environment file and configure your database settings.

    ```bash
    cp .env.example .env
    ```

    Update the following keys in your `.env` file to match your local database configuration:

    ```ini
    DB_DATABASE=rekening
    DB_USERNAME=root
    DB_PASSWORD=
    ```

5.  **Generate Application Key**

    ```bash
    php artisan key:generate
    ```

6.  **Run Migrations and Seeders**
    This will set up the database structure and populate it with initial data, including the default admin agent.

    ```bash
    php artisan migrate --seed
    ```

7.  **Build Assets**

    ```bash
    npm run build
    ```

**Optional:** Run `composer run setup` to automate install, env copy, key generation, migrate, `npm install`, and build. Then run `php artisan db:seed` for initial data (e.g. default agent).

## Usage

### Development Server

For local development, the recommended way is to run the app server, queue worker, and Vite together:

```bash
composer run dev
```

This starts the Laravel server, queue listener, and Vite HMR in one command.

Alternatively, run them separately:

```bash
php artisan serve
php artisan queue:listen --tries=1
npm run dev
```

Or only the web server and frontend (no queue):

```bash
php artisan serve
npm run dev
```

### Accessing the Application

Open your browser and navigate to the application URL (usually `http://localhost:8000`).

### Default Login Credentials

A default agent account is created by the `AgentSeeder` for immediate access:

-   **Agent Code**: `KSP987`
-   **Password**: `password`

## Database Schema

The application uses a relational database with the following core entities:

-   **Customers**: Stores personal details, regional data, and documents.
-   **Accounts**: Bank accounts linked to customers and agents.
-   **Cards**: ATM cards linked to accounts (sensitive data stored in notes).
-   **Shipments**: Delivery tracking for accounts with expedition integration (KlikResi), including delivery dates, tracking numbers, and status.
-   **Agents**: System users/referrers who manage accounts, shipments, and complaints.
-   **Users, Roles, Permissions**: Admin users and role-based access (Spatie Laravel Permission).
-   **Complaints**: Support tickets linked to customers, accounts, and agents.

## Testing

This project uses **Pest PHP 4** for testing. Run the test suite:

```bash
php artisan test --compact
```

Run tests in a specific file or filter by name:

```bash
php artisan test --compact tests/Feature/Rekening/CustomerCrudTest.php
php artisan test --compact --filter=CustomerCrud
```

The project also runs Pint (lint) as part of `composer test`.

## License

The MIT License (MIT).
